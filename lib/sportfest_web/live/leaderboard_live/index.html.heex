<h1>Leaderboards</h1>
<h2>Klassen Rangliste</h2>
<table>
  <thead>
    <tr>
      <th>Rang</th>
      <th>Klasse</th>
      <th>Score</th>
      <th> <img  src={Routes.static_path(@socket, "/images/bronze_medaille.png")}
                      width="40" height="40" alt="Bronzemedaille"/></th>
      <th> <img  src={Routes.static_path(@socket, "/images/silber_medaille.png")}
                      width="50" height="50" alt="Silbermedaille"/></th>
      <th> <img  src={Routes.static_path(@socket, "/images/gold_medaille.png")}
                      width="60" height="60" alt="Goldmedaille"/></th>

      <th></th>
    </tr>
  </thead>

  <tbody id="team_scores">
    <%= for i <- 0..Enum.count(@klassen) - 1 do %>
      <tr id={"klasse-#{Enum.at(@klassen,i).id}"}>
        <td><%= i+1 %></td>
        <td><%= Enum.at(@klassen,i).name %></td>
        <td><%= Sportfest.Ergebnisse.scaled_class_score(Enum.at(@klassen,i)) %></td>
        <td><%= Sportfest.Ergebnisse.count_bronze_medaillen(Enum.at(@klassen,i)) %></td>
        <td><%= Sportfest.Ergebnisse.count_silber_medaillen(Enum.at(@klassen,i)) %></td>
        <td><%= Sportfest.Ergebnisse.count_gold_medaillen(Enum.at(@klassen,i)) %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<h2>Sch√ºler:innen Rangliste</h2>

<table>
  <thead>
    <tr>
      <th>Rang</th>
      <th>Klasse</th>
      <th>Name</th>
      <th>Gesamtpunkte</th>
      <th> <img  src={Routes.static_path(@socket, "/images/bronze_medaille.png")}
                      width="40" height="40" alt="Bronzemedaille"/></th>
      <th> <img  src={Routes.static_path(@socket, "/images/silber_medaille.png")}
                      width="50" height="50" alt="Silbermedaille"/></th>
      <th> <img  src={Routes.static_path(@socket, "/images/gold_medaille.png")}
                      width="60" height="60" alt="Goldmedaille"/></th>

      <th></th>
    </tr>
  </thead>

  <tbody id="schueler_scores">
    <%= for i <- 0..Enum.count(@schueler) - 1 do %>
      <tr id={"schueler-#{Enum.at(@schueler,i).id}"}>
        <td><%= i+1 %></td>
        <td><%= Enum.at(@schueler, i).klasse.name %></td>
        <td><%= Enum.at(@schueler,i).name %></td>
        <td><%= Sportfest.Ergebnisse.get_score_sum(Enum.at(@schueler,i)) %></td>
        <td><%= Sportfest.Ergebnisse.count_bronze_medaillen(Enum.at(@schueler,i)) %></td>
        <td><%= Sportfest.Ergebnisse.count_silber_medaillen(Enum.at(@schueler,i)) %></td>
        <td><%= Sportfest.Ergebnisse.count_gold_medaillen(Enum.at(@schueler,i)) %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<h2>Klassen Rangliste nach Stationen</h2>
<%= for station <- @stationen do%>
  <h3><%= station.name %></h3>
  <table>
    <thead>
      <tr>
        <th>Rang</th>
        <th>Klasse</th>
        <th>Score</th>
        <th> <img  src={Routes.static_path(@socket, "/images/bronze_medaille.png")}
                        width="40" height="40" alt="Bronzemedaille"/></th>
        <th> <img  src={Routes.static_path(@socket, "/images/silber_medaille.png")}
                        width="50" height="50" alt="Silbermedaille"/></th>
        <th> <img  src={Routes.static_path(@socket, "/images/gold_medaille.png")}
                        width="60" height="60" alt="Goldmedaille"/></th>

        <th></th>
      </tr>
    </thead>

    <tbody id="team_scores">
      <%= with klassen <- Enum.sort_by(@klassen, fn klasse -> Sportfest.Ergebnisse.scaled_class_score(klasse, station) end, :desc) do %>
        <%= for i <- 0..Enum.count(klassen) - 1 do %>
          <tr id={"klasse-#{Enum.at(klassen,i).id}"}>
            <td><%= i+1 %></td>
            <td><%= Enum.at(klassen,i).name %></td>
            <td><%= Sportfest.Ergebnisse.scaled_class_score(Enum.at(klassen,i), station) %></td>
            <td><%= Sportfest.Ergebnisse.count_bronze_medaillen(Enum.at(klassen,i), station) %></td>
            <td><%= Sportfest.Ergebnisse.count_silber_medaillen(Enum.at(klassen,i), station) %></td>
            <td><%= Sportfest.Ergebnisse.count_gold_medaillen(Enum.at(klassen,i), station) %></td>
          </tr>
        <% end %>
      <% end %>
    </tbody>
  </table>
<% end %>